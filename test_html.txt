/* 1. Setup Safe Path */
%let safe_path = %sysfunc(getoption(work));

/* 2. Reset Output */
ods _all_ close;

/* 3. Open HTML5 File (Modern Standard) */
ods html5 path="&safe_path" file="quote_test.html" options(bitmap_mode='inline');

/* 4. THE BRAIN (Clean Logic) */
/* Notice: I use outer DOUBLE QUOTES (") so I can use SINGLE QUOTES (') inside freely */
ods html5 text="
<script>
    // 1. Proof of Life
    window.onload = function() {
        console.log('System Started');
        // Uncomment the next line if you want a popup verification
        // alert('System Ready: JavaScript is active.');
    };

    // 2. The Switcher Logic
    function switchTab(clickedTab, boxID) {
        // Reset ALL buttons to grey
        var btns = document.getElementsByClassName('my-btn');
        for(var i=0; i<btns.length; i++) {
            btns[i].style.backgroundColor = '#ddd';
            btns[i].style.color = '#333';
        }
        
        // Highlight CLICKED button to Blue
        clickedTab.style.backgroundColor = '#0078d7';
        clickedTab.style.color = 'white';

        // Hide ALL content boxes
        var boxes = document.getElementsByClassName('content-box');
        for(var k=0; k<boxes.length; k++) {
            boxes[k].style.display = 'none';
        }

        // Show the ONE we want
        document.getElementById(boxID).style.display = 'block';
    }
</script>

<style>
    body { font-family: 'Segoe UI', sans-serif; padding: 40px; background: #f4f4f4; }
    
    .nav-bar { margin-bottom: 20px; }
    
    .my-btn {
        padding: 15px 30px; 
        font-size: 16px; 
        cursor: pointer; 
        background-color: #ddd; /* Default Grey */
        color: #333;
        border: none; 
        margin-right: 5px;
        border-radius: 4px;
        font-weight: bold;
    }
    
    .content-box {
        background: white;
        padding: 40px;
        border-radius: 4px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        display: none; /* Hidden by default */
    }
</style>
";

/* 5. THE BODY (Using Double Quotes wrapper again) */
ods html5 text="
<div class='nav-bar'>
    <button class='my-btn' onclick='switchTab(this, \"box_dept\")'>Department</button>
    <button class='my-btn' onclick='switchTab(this, \"box_emp\")'>Employee</button>
    <button class='my-btn' onclick='switchTab(this, \"box_data\")'>Data</button>
</div>

<div id='box_dept' class='content-box'>
    <h1 style='color:#0078d7; margin-top:0;'>Department Statistics</h1>
    <p>If you can read this, the first tab is active.</p>
</div>

<div id='box_emp' class='content-box'>
    <h1 style='color:#28a745; margin-top:0;'>Employee Statistics</h1>
    <p>This is the Employee view.</p>
</div>

<div id='box_data' class='content-box'>
    <h1 style='color:#6c757d; margin-top:0;'>Raw Data Vault</h1>
    <p>Data table goes here.</p>
</div>
";

/* 6. CLOSE & TRIGGER */
ods html5 close;

title "Test Generated";
data _null_; file print; put "Open via Globe Icon."; run;
